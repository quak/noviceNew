---

import HalfBig from './elements/halfr.astro'
import QuarterBig from './elements/quarterr.astro'

import { getPostsByCategoryId,getCatSlugById } from '../../lib/article';


const {block} = Astro.props;

const blckjsn = JSON.parse(block.attributesJSON);
let datacatid = blckjsn?.data?.blockcategory;
if (datacatid === undefined){
	datacatid = '["6"]';
}


//let articles = await getPostByCategoryById(datacatid,20);
let articles = await getPostsByCategoryId(81,20);

if(articles === undefined){
	articles = new Array();
}
const articles12 = articles.slice(0,2);
const articles3x = articles.slice(3,100);

let catslug = await getCatSlugById(datacatid[0]);
---


<section class="bg-klopinj-blue px-1 md:px-4 py-12 md:py-24">
	<div class="mx-auto lg:max-w-screen-lg max-w-7xl 2xl:max-w-nov-width">
		<h2 class="col-span-2 font-light text-5xl text-white mb-2 uppercase text-center">galerije</h2>
	</div>
	
	<div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mx-auto lg:max-w-screen-lg max-w-7xl 2xl:max-w-nov-width mb-4">
		
		{articles12.map(function (article,k) {
						
				return (

					<HalfBig article={article} style="normal"/>	

				);
		
		})}
		
	</div>

	<div class="mx-auto lg:max-w-screen-lg max-w-7xl 2xl:max-w-nov-width swiper overflow-hidden relative ">
		<div class="swiper-wrapper">

			{articles3x.map(function (article,k) {
				
					return (

						<QuarterBig article={article} style="big" isslider={true}  showdescription={false}/>
				
					);
	
			})}
			
		</div>
		<div class="swiper-button-prev"></div>
		<div class="swiper-button-next"></div>
	</div>
	<div class="mx-auto max-w-md ">
		<span class="mr-2 sm:ml-2" data-astro-source-file="/Users/augustinmalle/Desktop/noviceNew/src/components/Header.astro"> 
			<a href={`/kategorije/${catslug}`} class=" w-24 mx-auto flex items-center justify-center bg-papez-purple  h-7 sm:h-8 block text-sele-ivory uppercase py-1 px-1 sm:px-4 text-sm tracking-widels leading-nbutton"  > 
				
				<span class="text-white uppercase  text-base  cursor-pointer tracking-widels" >
					Veƒç
				</span> 
			</a> 
		</span>
	</div>
</section>


<script>
	import Swiper from 'swiper';
	import { Navigation, Pagination } from 'swiper/modules';
	
	// import styles bundle
	import 'swiper/css';
	import 'swiper/css/navigation';
	import 'swiper/css/pagination';
	document.addEventListener('astro:page-load', () => {
			// init Swiper:
			const swiper = new Swiper('.swiper', {
			// Optional parameters
			modules: [Navigation, Pagination],
			direction: 'horizontal',
			loop: true,
			slidesPerView: 1,
			spaceBetween: 16,

			// Navigation arrows
			navigation: {
				nextEl: '.swiper-button-next',
				prevEl: '.swiper-button-prev',
			},

			breakpoints: {
				480: {
				slidesPerView: 2,
				},
				768: {
				slidesPerView: 4,
				}
			}

			});
		});
  </script>
