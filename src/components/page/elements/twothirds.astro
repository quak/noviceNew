---
import { fade } from 'astro:transitions';
const {article, shouldll} = Astro.props;
import { Image } from 'astro:assets';
import { Picture } from 'astro:assets';
import bookmarkicon from "../../../images/bookmark.svg";
import usericon from "../../../images/user.svg";


let url = '/'+article?.node?.categories?.nodes[0].slug+'/'+article?.node?.slug;
let d = new Date(article?.node?.date);
let datestring = d.getDate()  + "." + (d.getMonth()+1) + "." + d.getFullYear();

let avtor ="";

if(article?.node?.author?.node?.firstName!=null){
    avtor = ""+article?.node?.author?.node?.firstName ;
}
if(article?.node?.author?.node?.lastName!=null){
    avtor = avtor+" "+article?.node?.author?.node?.lastName ;
}

if(avtor == ""){
    avtor="novice";
}

let place = article?.node?.place?.place;
let placeclass = "";
if(place === null || place.trim()===0){
    placeclass = "hidden";
}


var llstyle = "lazy";
if(shouldll==="false"){
    llstyle = "eager";
}

---

<div class="col-span-2">
    <a href={url} rel="prefetch">
        <article class="relative">
            <div class="overflow-hidden relative ">
                <Picture width="754" height="424" class="ease-out duration-4000 transition-all hover:scale-103"   src={article?.node?.featuredImage?.node?.sourceUrl} srcset={article?.node?.featuredImage?.node?.srcSet} loading={llstyle} alt={article?.node?.title} transition:name={`articleimage${article.node.id}`} transition:animate={fade({ duration: '1s' })}/>
                
            </div>
            <div class="absolute p-4 md:px-12 md:py-4 bottom-0">

                <span class="z-20 relative">
                    <span class={`bg-papez-purple text-base md:text-xl text-sele-ivory uppercase px-4 inline-block my-3 uppercase ${placeclass}`}>{place}</span>
                    <h2 class="text-sele-ivory text-xl md:text-5xl line-clamp-2 text-ellipsis"><Fragment set:html={article?.node?.title}/></h2>
                </span>

                <div class="flex gap-1 justify-center mb-2 z-20 relative">
                    <span class="uppercase flex flex-row items-center text-white px-2  tracking-widels">
                        
                        <Image class="svggowhite"  src={bookmarkicon} loading={llstyle} alt="Date icon"/>
                        {datestring}
                    </span>

                    <span class="uppercase flex flex-row items-center text-white px-2 tracking-widels">
                        
                        <Image class=" svggowhite max-h-4 mr-1" src={usericon} alt="Avtor icon" loading={llstyle}/>
                        {avtor}
                    </span>
                </div>
                
            </div>	
            <div class="z-10" style="position: absolute; top:0;left:0; width:100%;height:100%;background:linear-gradient(to top, rgba(0,0,0,0.85), transparent);"></div>
        </article>
    </a>
</div>