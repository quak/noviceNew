---

import Half from './elements/halfr.astro'
import Third from './elements/thirdr.astro'
import Quarter from './elements/quarterr.astro'

import { getPostsByCategoryId,getCatSlugById } from '../../lib/article';

const {block} = Astro.props;


const blckjsn = JSON.parse(block.attributesJSON);
let datacatid = blckjsn?.data?.blockcategory;
if (datacatid === undefined){
	datacatid = '["6"]';
}

let articles = await getPostsByCategoryId(10,10);
if(articles === undefined){
	articles = new Array();
}
const articlesrow1 = articles.slice(0,2);
const articlesrow2 = articles.slice(2,5);
const articlesrow3 = articles.slice(5,9);


let catslug = await getCatSlugById(datacatid[0]);
---


<section class="bg-sele-ivory px-1 md:px-4 py-12 md:py-24">
	<div class="mx-auto lg:max-w-screen-lg max-w-7xl 2xl:max-w-nov-width">
		<h2 class="col-span-2 font-light text-5xl text-klopinj-blue mb-2 uppercase text-center">Šport</h2>
	</div>
	<div class="grid grid-cols-2 sm:grid-cols-4  md:grid-flow-row  gap-4 mx-auto lg:max-w-screen-lg max-w-7xl 2xl:max-w-nov-width">
		{articlesrow1.map(function (article,k) {
			
			
				return (
					<Half article={article} style="normal"/>
				);
			
		})}
	</div>
	<div class="grid grid-cols-1 sm:grid-cols-3  md:grid-flow-row  mt-4 gap-4 mx-auto lg:max-w-screen-lg max-w-7xl 2xl:max-w-nov-width">
		{articlesrow2.map(function (article,k) {
			
			return (

					<Third article={article} style="normal" isslider="false" showdescription="false"/>
					
				);
			
		})}
	</div>
	<div class="hidden sm:grid grid-cols-2 md:grid-cols-4 md:grid-flow-col mt-4  gap-4 mx-auto lg:max-w-screen-lg max-w-7xl 2xl:max-w-nov-width">
		{articlesrow3.map(function (article,k) {
			

			return (
				<Quarter article={article} style="big" showdescription={false} />
					
				);
			
		})}
	</div>
	<div class="mx-auto max-w-md ">
		<span class="mr-2 sm:ml-2" data-astro-source-file="/Users/augustinmalle/Desktop/noviceNew/src/components/Header.astro"> 
			<a href={`/kategorije/${catslug}`} class=" w-24 mx-auto flex items-center justify-center bg-klopinj-blue h-7 sm:h-8 block text-sele-ivory uppercase py-1 px-1 sm:px-4 text-sm tracking-widels leading-nbutton"  > 
				
				<span class="text-white uppercase  text-base  cursor-pointer tracking-widels" >
					Več
				</span> 
			</a> 
		</span>
	</div>

			
			
		
		
</section>